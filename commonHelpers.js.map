{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst API_KEY = \"42651463-7e9bc4d6a898bed570bd4622e\";\nconst BaseUrl = \"https://pixabay.com/api/\";\nconst loader = document.querySelector('.loader');\n\nlet perPage = 15;\nexport async function searchImages(searchQuery, currentPage) {\n    const params = new URLSearchParams({\n        key: API_KEY,\n        q: searchQuery,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n        per_page: perPage,\n    })\n    loader.style.display = 'block';\n\n\n    try {\n        const response = await axios.get(`${BaseUrl}?${params}`);\n        if (!response === 200) {\n            throw new Error('Network response was not OK');\n        }\n        const data = response.data;\n        loader.style.display = 'none';\n        if (data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                fontSize: 'large',\n                close: false,\n                position: 'topRight',\n                messageColor: 'white',\n                timeout: 2000,\n                backgroundColor: 'red',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n        }\n        return data;\n    }\n    catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n","export function createMarkup(data) {\n    return data.hits.map(\n    element => `<div class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${element.largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${element.webformatURL}\" alt=\"${element.tags}\">\n      </a>\n      <div class=\"gallery-image-info\">\n          <p class=\"image-info-item\"><span class=\"items-text\">Likes: </span>${element.likes}</p>\n          <p class=\"image-info-item\"><span class=\"items-text\">Views: </span>${element.views}</p>\n          <p class=\"image-info-item\"><span class=\"items-text\">Comments: </span>${element.comments}</p>\n          <p class=\"image-info-item\"><span class=\"items-text\">Downloads: </span>${element.downloads}</p>\n      </div>\n  </div>`\n).join('')\n}","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.querySelector(\".search-form\")\nconst galleryContainer = document.querySelector(\".gallery\")\nconst loadMoreBtn = document.querySelector(\".load-btn\")\nimport { searchImages } from \"./js/pixabay-api.js\";\nimport { createMarkup} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nlet searchQuery = \"\";\nlet currentPage;\nlet totalHits;\nloadMoreBtn.style.display = \"none\";\nconst lightbox = new SimpleLightbox('.gallery-link', { \n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 200,\n});\n\nform.addEventListener(\"submit\", onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\nfunction onSubmit(event) {\n    event.preventDefault();\n    galleryContainer.innerHTML = \"\";\n    currentPage = 1;\n    searchQuery = form.elements.searchQuery.value.trim(),\n        searchImages(searchQuery, currentPage).then(data => {\n            totalHits = data.totalHits;\n        const markup = createMarkup(data)\n  galleryContainer.insertAdjacentHTML('beforeend', markup)\n            lightbox.refresh()\n            hideLoadmoreBtn(data)\n     }).catch(error => console.log(error))\n}\nfunction onLoadMore(){\n    currentPage++;\n    searchImages(searchQuery, currentPage).then(data => {\n            totalHits = data.totalHits;\n        const markup = createMarkup(data)\n  galleryContainer.insertAdjacentHTML('beforeend', markup)\n        lightbox.refresh()\n        hideLoadmoreBtn(data)\n     }).catch(error => console.log(error))\n}\nfunction hideLoadmoreBtn(data) {\n    if (galleryContainer.children.length < totalHits) {\n        loadMoreBtn.style.display = \"block\";\n    } else {\n        const currentHits = currentPage * 15;\n        if (currentHits >= totalHits) {\n            loadMoreBtn.style.display = \"none\";\n            iziToast.info({\n        title: 'Info',\n        message: `We're sorry, but you've reached the end of search results.`,\n        backgroundColor: '#4CAF50',\n        messageColor: '#fff',\n        titleColor: '#fff',\n        progressBarColor: '#4CAF50',\n        position: 'topRight',\n            })\n        }\n        else {\n            createMarkup(data)\n        }}\n}\nfunction smoothScroll() {\n    const heightItem = galleryContainer.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: 3*heightItem,\n        behavior: \"smooth\",\n    });\n}\ngalleryContainer.addEventListener('scroll', smoothScroll)"],"names":["API_KEY","BaseUrl","loader","perPage","searchImages","searchQuery","currentPage","params","response","axios","data","iziToast","error","createMarkup","element","form","galleryContainer","loadMoreBtn","totalHits","lightbox","SimpleLightbox","onSubmit","onLoadMore","event","markup","hideLoadmoreBtn","smoothScroll","heightItem"],"mappings":"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"}